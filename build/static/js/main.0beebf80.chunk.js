(this["webpackJsonp@ibm-watson/speech-to-text-code-pattern"]=this["webpackJsonp@ibm-watson/speech-to-text-code-pattern"]||[]).push([[0],{113:function(e,a,t){},122:function(e,a){},124:function(e,a){},132:function(e,a){},134:function(e,a){},168:function(e,a){},170:function(e,a){},175:function(e,a){},177:function(e,a){},184:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(91),s=t.n(o),i=(t(113),t(186)),l=t(195),d=t(97),c=t.n(d),u=t(98),p=t.n(u),m=t(101),b=t.n(m),f=t(100),h=t.n(f),g=t(99),_=t.n(g),w=t(196),v=t(3),y=function(e){var a=e.description,t=e.links,r=e.title;return Object(v.jsxs)(w.a,{className:"header",children:[Object(v.jsxs)("div",{className:"title-container",children:[Object(v.jsx)("h2",{className:"header-title",children:r}),Object(v.jsx)("p",{children:a})]}),Object(v.jsx)("div",{className:"link-container",children:Object(v.jsx)("div",{className:"link-wrapper",children:t.map((function(e){return e}))})})]})};y.defaultProps={description:"",links:[],title:""};var k=y,S=t(5),j=t(7),x=t.n(j),O=t(14),N=t(13),C=t(57),P=t.n(C),R=t(92),B=t.n(R),A=t(188),E=t(193),M=t(190),T=t(191),I=t(197),D=t(93),U=t.n(D),z=t(36),W=function(e){var a=e.isRecording,t=e.isSamplePlaying,n=e.isUploadPlaying,o=e.keywordText,s=e.modelName,i=e.onError,d=e.onStartPlayingFileUpload,c=e.onStopPlayingFileUpload,u=e.onStartPlayingSample,p=e.onStopPlayingSample,m=e.onStartRecording,b=e.onStopRecording,f=e.useSpeakerLabels,h=Object(r.useState)([]),g=Object(N.a)(h,2),_=g[0],w=g[1];Object(r.useEffect)((function(){var e=[];o.length>0&&(e=o.split(",").map((function(e){return e.trim()}))),w(e)}),[o]);var y=z.find((function(e){return e.name===s})),k=y?y.filename:null,j=function(){var e=Object(O.a)(x.a.mark((function e(){var a,t,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U()("/api/auth");case 2:return a=e.sent,e.next=5,a.json();case 5:if(t=e.sent,a.ok){e.next=9;break}return i(t),e.abrupt("return",{error:t});case 9:return r={},n=_.map((function(e){return e.toLowerCase()})),r=Object(S.a)(Object(S.a)({},r),{},{url:t.url||void 0,accessToken:t.accessToken,format:!0,keywords:_.length>0?n:void 0,keywordsThreshold:_.length>0?.01:void 0,model:s,objectMode:!0,play:!0,realtime:!0,resultsBySpeaker:f,speakerlessInterim:!0,timestamps:!0}),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return a=e.sent,e.abrupt("return",Object(S.a)(Object(S.a)({},a),{},{file:"audio/".concat(k)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(O.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return a=e.sent,e.abrupt("return",Object(S.a)(Object(S.a)({},a),{},{resultsBySpeaker:!1}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(O.a)(x.a.mark((function e(a){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return t=e.sent,e.abrupt("return",Object(S.a)(Object(S.a)({},t),{},{file:a,resultsBySpeaker:!1}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"submit-container",children:[t?Object(v.jsx)(l.a,{className:"submit-button",kind:"tertiary",onClick:p,children:"Stop audio sample"}):Object(v.jsx)(l.a,{className:"submit-button",disabled:!s,kind:"tertiary",onClick:Object(O.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:(a=e.sent).error||u(a);case 4:case"end":return e.stop()}}),e)}))),children:"Play audio sample"}),a?Object(v.jsx)(l.a,{className:"submit-button",kind:"tertiary",onClick:b,children:"Stop recording"}):Object(v.jsx)(l.a,{className:"submit-button",disabled:!s,kind:"tertiary",onClick:Object(O.a)(x.a.mark((function e(){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:(a=e.sent).error||m(a);case 4:case"end":return e.stop()}}),e)}))),children:"Record your own"}),n?Object(v.jsx)(l.a,{className:"submit-button",kind:"tertiary",onClick:c,children:"Stop playing"}):Object(v.jsx)(I.a,{accept:["audio/wav","audio/mpeg","audio/flac","audio/opus"],buttonKind:"tertiary",className:"submit-button",disabled:!s,disableLabelChanges:!0,labelText:"Upload file",onChange:function(){var e=Object(O.a)(x.a.mark((function e(a){var t,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.currentTarget.files[0],e.next=3,R(t);case 3:(r=e.sent).error||d(r);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()})]})};W.defaultProps={isRecording:!1,isSamplePlaying:!1,isUploadPlaying:!1,keywordText:"",modelName:null,onError:function(){},onStartPlayingFileUpload:function(){},onStopPlayingFileUpload:function(){},onStartPlayingSample:function(){},onStopPlayingSample:function(){},onStartRecording:function(){},onStopRecording:function(){},useSpeakerLabels:!1};var F=W,L=function(e){var a=e.isRecording,t=e.isSamplePlaying,n=e.isUploadPlaying,o=e.onError,s=e.onSelectNewModel,i=e.onStartPlayingFileUpload,l=e.onStopPlayingFileUpload,d=e.onStartPlayingSample,c=e.onStopPlayingSample,u=e.onStartRecording,p=e.onStopRecording,m=z.map((function(e){return{id:e.name,label:e.description,supportsSpeakerLabels:e.supported_features.speaker_labels}})),b=Object(r.useState)(m[0]),f=Object(N.a)(b,2),h=f[0],g=f[1],_=Object(r.useState)(z[0].keywords),y=Object(N.a)(_,2),k=y[0],S=y[1],j=Object(r.useState)(!1),x=Object(N.a)(j,2),O=x[0],C=x[1];return Object(v.jsxs)(w.a,{className:"control-container",children:[Object(v.jsx)("h3",{className:"container-title",children:"Input"}),Object(v.jsx)(A.a,{legendText:"Language model",children:Object(v.jsx)(E.a,{id:"language-model-dropdown",label:"Select a language model",onChange:function(e){g(e.selectedItem);var a=z.find((function(a){return a.name===e.selectedItem.id})).keywords;S(a),O&&!e.selectedItem.supportsSpeakerLabels&&C(!1),s()},items:m,selectedItem:h&&h.label,defaultText:"Select a language model",ariaLabel:"Language selection dropdown",light:!0})}),Object(v.jsx)(A.a,{legendText:"Keywords to spot",children:Object(v.jsx)(M.a,{id:"custom-keyword-input",labelText:"Custom language keyword input",placeholder:"Enter custom language keywords",hideLabel:!0,invalidText:"Invalid keywords provided",value:k,onChange:function(e){S(e.target.value)},light:!0})}),Object(v.jsx)(A.a,{legendText:"Detect multiple speakers (only supported with sample audio)",children:Object(v.jsx)(T.a,{id:"speaker-label-toggle","aria-label":"Speaker label toggle",disabled:!h||!h.supportsSpeakerLabels,toggled:O,onToggle:function(){C(!O)}})}),Object(v.jsx)(F,{isRecording:a,isSamplePlaying:t,isUploadPlaying:n,keywordText:k,modelName:h&&h.id,onError:o,onStartPlayingFileUpload:i,onStopPlayingFileUpload:l,onStartPlayingSample:d,onStopPlayingSample:c,onStartRecording:u,onStopRecording:p,useSpeakerLabels:O})]})};L.defaultProps={isRecording:!1,isSamplePlaying:!1,isUploadPlaying:!1,onError:function(){},onSelectNewModel:function(){},onStartPlayingFileUpload:function(){},onStopPlayingFileUpload:function(){},onStartPlayingSample:function(){},onStopPlayingSample:function(){},onStartRecording:function(){},onStopRecording:function(){}};var G=L,K=t(94),J=t(95),X=t(48),q=t(103),Y=t(102),V=50,Z=50,H=function(e){Object(q.a)(t,e);var a=Object(Y.a)(t);function t(e){var r;return Object(K.a)(this,t),(r=a.call(this,e)).audioWaveCanvasRef=n.a.createRef(),r.audioWaveCanvasCtx=null,r.animationFrameId=null,r.draw=r.draw.bind(Object(X.a)(r)),r.state={startingTimestamp:0,microphoneData:new Uint8Array(1024)},r}return Object(J.a)(t,[{key:"componentDidMount",value:function(){this.audioWaveCanvasCtx=this.audioWaveCanvasRef.current.getContext("2d"),this.audioWaveCanvasCtx.lineCap="round",this.initializeCanvasDimensions()}},{key:"componentDidUpdate",value:function(e){Object(N.a)(e.data,1)[0]!==Object(N.a)(this.props.data,1)[0]&&this.drawInitialAudioWave(),!1===e.isTranscribing&&!0===this.props.isTranscribing?(this.setStartingTimestamp(),this.draw()):!0===e.isTranscribing&&!1===this.props.isTranscribing&&this.stopDrawing()}},{key:"setStartingTimestamp",value:function(){this.setState({startingTimestamp:Date.now()})}},{key:"initializeCanvasDimensions",value:function(){var e=this.audioWaveCanvasRef.current,a=this.props.audioWaveContainerRef.current;e.width=a.clientWidth,e.height=100}},{key:"drawInitialAudioWave",value:function(){this.resetCanvasForNewFrame(),this.drawEmptyDataPoints()}},{key:"drawEmptyDataPoints",value:function(){var e=this;this.props.data.forEach((function(a,t){e.audioWaveCanvasCtx.beginPath(),e.audioWaveCanvasCtx.fillStyle="rgba(0, 98, 255, 0.5)",e.audioWaveCanvasCtx.fillRect(2*t,Z,1,V*a),e.audioWaveCanvasCtx.fillRect(2*t,Z,1,-50*a),e.audioWaveCanvasCtx.stroke(),e.audioWaveCanvasCtx.closePath()}))}},{key:"drawMicrophoneDataPoints",value:function(){var e=this;this.props.audioAnalyzer.getByteFrequencyData(this.state.microphoneData);var a=this.state.microphoneData;[].slice.call(a).map((function(e){return e/255})).forEach((function(a,t){e.audioWaveCanvasCtx.beginPath(),e.audioWaveCanvasCtx.fillStyle="rgba(0, 98, 255, 1)",e.audioWaveCanvasCtx.fillRect(2*t,Z,1,V*a),e.audioWaveCanvasCtx.fillRect(2*t,Z,1,-50*a),e.audioWaveCanvasCtx.stroke(),e.audioWaveCanvasCtx.closePath()}))}},{key:"drawAudioDataPoints",value:function(){var e=this,a=this.props,t=a.data,r=a.duration,n=(Date.now()-this.state.startingTimestamp)/r,o=t.length*n,s=Math.floor(o),i=o-s;i>1&&(i=1),i<.5&&(i=.5),t.forEach((function(a,t){e.audioWaveCanvasCtx.beginPath();var r="rgba(0, 98, 255, 1)";t>s&&(r="rgba(0, 98, 255, 0.5)"),t-1===s&&(r="rgba(0, 98, 255, ".concat(i.toFixed(2),")")),e.audioWaveCanvasCtx.fillStyle=r,e.audioWaveCanvasCtx.fillRect(2*t,Z,1,V*a),e.audioWaveCanvasCtx.fillRect(2*t,Z,1,-50*a),e.audioWaveCanvasCtx.stroke(),e.audioWaveCanvasCtx.closePath()}))}},{key:"draw",value:function(){this.resetCanvasForNewFrame(),this.props.audioSource&&"microphone"===this.props.audioSource?this.drawMicrophoneDataPoints():this.drawAudioDataPoints(),this.animationFrameId=requestAnimationFrame(this.draw)}},{key:"resetCanvasForNewFrame",value:function(){var e=this.audioWaveCanvasRef.current;this.audioWaveCanvasCtx.clearRect(0,0,e.width,e.height)}},{key:"stopDrawing",value:function(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}},{key:"render",value:function(){return Object(v.jsx)("div",{ref:this.props.audioWaveContainerRef,className:"audiowave",children:Object(v.jsx)("canvas",{ref:this.audioWaveCanvasRef})})}}]),t}(n.a.Component);H.defaultProps={audioSource:null,audioAnalyzer:null};var Q=H,$=t(192),ee=function(e){var a=e.confidence,t=e.startTime,r=e.endTime;return Object(v.jsxs)("div",{className:"keyword-tooltip",children:[Object(v.jsxs)("p",{children:["Confidence: ",a]}),Object(v.jsxs)("p",{children:[t,"s - ",r,"s"]})]})},ae=t(40),te=function(e,a,t){var r=[];if(a.length>0){var n=function(e){var a=[];e.forEach((function(e){a=[].concat(Object(ae.a)(a),Object(ae.a)(Object.keys(e)))}));var t=a.map((function(e,t){return t!==a.length-1?"".concat(e,"|"):e})).reduce((function(e,a){return e+a}),"");return new RegExp("(".concat(t,")(?!')"),"gi")}(a);r=e.split(n)}if(0===r.length)return[{text:e,type:"normal"}];var o={};return r.map((function(e,r){var n=e.toLowerCase();if(r%2===0)return{text:e,type:"normal"};var s=a[t]&&a[t][n],i=0;o[n]?(i=o[n],o[n]+=1):o[n]=1;var l=s&&s[i];return l?{text:e,type:"keyword",startTime:l.start_time,endTime:l.end_time,confidence:l.confidence}:{}}))},re=function(e){var a=e.keywordInfo,t=e.transcriptArray;return Object(v.jsx)("div",{className:"transcript-box",children:t.map((function(e,t){var r=e.speaker,n=e.text,o=te(n,a,t);return Object(v.jsxs)("div",{children:[null!==r&&Object(v.jsx)("span",{className:"speaker-label--".concat(r),children:"Speaker ".concat(r,": ")}),o.map((function(e,a){return e?"normal"===e.type?Object(v.jsx)("span",{children:"".concat(e.text)},"transcript-text-".concat(t,"-").concat(a)):"keyword"===e.type?Object(v.jsx)($.a,{align:"center",direction:"top",tooltipText:Object(v.jsx)(ee,{confidence:e.confidence,startTime:e.startTime,endTime:e.endTime}),triggerClassName:"keyword-info-trigger",children:e.text},"transcript-keyword-".concat(t,"-").concat(a)):null:null}))]},"transcript-".concat(t))}))})};re.defaultProps={keywordInfo:[],transcriptArray:[]};var ne=re,oe=function(e){var a=e.audioAnalyzer,t=e.audioDataArray,r=e.audioDuration,n=e.audioSource,o=e.audioWaveContainerRef,s=e.isTranscribing,i=e.keywordInfo,l=e.transcriptArray;return Object(v.jsxs)(w.a,{className:"output-container",children:[Object(v.jsx)("h3",{className:"container-title",children:"Output"}),Object(v.jsx)(A.a,{legendText:"Audio",children:Object(v.jsx)(Q,{audioWaveContainerRef:o,data:t,duration:r,isTranscribing:s,audioSource:n,audioAnalyzer:a})}),Object(v.jsx)(A.a,{legendText:"Transcript",children:Object(v.jsx)(ne,{keywordInfo:i,transcriptArray:l})})]})};oe.defaultProps={audioDataArray:[],audioDuration:0,audioSource:"",isTranscribing:!1,keywordInfo:[],transcriptArray:[]};var se=oe,ie=t(194),le="notificationHasBeenSeen",de=function(e){var a=e.caption,t=e.children,n=e.className,o=e.hideAfterFirstDisplay,s=e.hideCloseButton,i=e.iconDescription,l=e.kind,d=e.lowContrast,c=e.onCloseButtonClick,u=e.role,p=e.subtitle,m=e.timeout,b=e.title,f=Object(r.useState)(),h=Object(N.a)(f,2),g=h[0],_=h[1],w=Object(r.useState)(!1),y=Object(N.a)(w,2),k=y[0],S=y[1];return Object(r.useEffect)((function(){_(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15))}),[]),Object(r.useEffect)((function(){var e=document.querySelector(".custom-toast-".concat(g));e&&(e.className+="enter")}),[g]),Object(r.useEffect)((function(){o&&void 0!==typeof window&&void 0!==typeof window.localStorage&&"true"===window.localStorage.getItem(le)&&S(!0)}),[o]),k?null:Object(v.jsx)(ie.a,{caption:a,className:"custom-toast-".concat(g," ").concat(n),hideCloseButton:s,iconDescription:i,kind:l,lowContrast:d,onCloseButtonClick:function(){o&&void 0!==typeof window&&void 0!==typeof window.localStorage&&window.localStorage.setItem(le,"true"),c()},role:u,subtitle:p,timeout:m,title:b,children:t})};de.defaultProps={caption:"",children:null,className:"",hideAfterFirstDisplay:!0,hideCloseButton:!1,iconDescription:"closes notification",kind:"error",lowContrast:!1,onCloseButtonClick:function(){},role:"alert",subtitle:"",timeout:0,title:""};var ce=de,ue="SET_AUDIO_ANALYZER",pe="SET_AUDIO_CONTEXT",me="SET_AUDIO_SOURCE",be="SET_AUDIO_STREAM",fe="SET_AUDIO_VISUALIZATION_DATA",he="SET_ERROR",ge="SET_SPEAKER_LABELS",_e="SET_IS_RECORDING",we="SET_IS_SAMPLE_PLAYING",ve="SET_IS_TRANSCRIBING",ye="SET_IS_UPLOAD_PLAYING",ke="UPDATE_RESULTS",Se={audioAnalyzer:{},audioContext:null,audioDataArray:[],audioDurationInMs:0,audioSource:"",audioStream:null,error:null,isRecording:!1,isSamplePlaying:!1,isTranscribing:!1,isUploadPlaying:!1,keywordInfo:[],speakerLabels:[],transcript:[]},je=function(e,a){switch(a.type){case"SET_AUDIO_ANALYZER":return Object(S.a)(Object(S.a)({},e),{},{audioAnalyzer:a.audioAnalyzer});case"SET_AUDIO_CONTEXT":return Object(S.a)(Object(S.a)({},e),{},{audioContext:a.audioContext});case"SET_AUDIO_SOURCE":return Object(S.a)(Object(S.a)({},e),{},{audioSource:a.audioSource});case"SET_AUDIO_STREAM":return Object(S.a)(Object(S.a)({},e),{},{audioStream:a.audioStream});case"SET_AUDIO_VISUALIZATION_DATA":return Object(S.a)(Object(S.a)({},e),{},{audioDataArray:a.audioDataArray,audioDurationInMs:a.audioDurationInMs});case"SET_ERROR":return Object(S.a)(Object(S.a)({},e),{},{error:a.error});case"SET_IS_RECORDING":return Object(S.a)(Object(S.a)({},e),{},{isRecording:a.isRecording});case"SET_IS_SAMPLE_PLAYING":return Object(S.a)(Object(S.a)({},e),{},{isSamplePlaying:a.isSamplePlaying});case"SET_IS_TRANSCRIBING":return Object(S.a)(Object(S.a)({},e),{},{isTranscribing:a.isTranscribing});case"SET_IS_UPLOAD_PLAYING":return Object(S.a)(Object(S.a)({},e),{},{isUploadPlaying:a.isUploadPlaying});case"SET_SPEAKER_LABELS":return Object(S.a)(Object(S.a)({},e),{},{speakerLabels:a.speakerLabels});case"UPDATE_RESULTS":var t=Object(ae.a)(e.transcript);return 0===a.resultIndex?t=a.transcript:t[a.resultIndex]=a.transcript[0],Object(S.a)(Object(S.a)({},e),{},{keywordInfo:a.keywordInfo,transcript:t});default:throw new Error}},xe=2,Oe=function(e){var a=new FileReader;return new Promise((function(t,r){a.onload=function(){var e=a.result;t(e)},a.onerror=function(){a.abort(),r(new Error("failed to process file"))},a.readAsArrayBuffer(e)}))},Ne=function(){var e=Object(O.a)(x.a.mark((function e(a,t,r){var n,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(a);case 2:return n=e.sent,o=new Uint8Array(n.slice(0)),e.abrupt("return",new Promise((function(e,a){t.decodeAudioData(n,(function(a){for(var t=a.duration,n=r-2*xe,s=Math.floor(n/2),i=o.length/s,l=[],d=1;d<s;d+=1){var c=d-1;c<0&&(c=0),l.push(o.slice(c*i,d*i))}var u=l.map((function(e){return e.reduce((function(e,a){return e+a}))/(255*i)}));e({duration:t,reducedFloatArray:u})}),(function(){a(new Error("failed to chunk audio"))}))})));case 5:case"end":return e.stop()}}),e)})));return function(a,t,r){return e.apply(this,arguments)}}(),Ce=function(e,a){return{title:e,description:a}},Pe=function(){var e=Object(r.useReducer)(je,Se),a=Object(N.a)(e,2),t=a[0],n=a[1],o=Object(r.useRef)(null);Object(r.useEffect)((function(){var e=new(window.AudioContext||window.webkitAudioContext),a=e.createAnalyser();n({audioAnalyzer:a,type:ue}),n({audioContext:e,type:pe})}),[]);var s=function(e){if(e.speaker_labels)n({speakerLabels:e.speaker_labels,type:ge});else{var a=function(e){var a=e.results,t=e.result_index,r=[],n=[],o=!1;return a.forEach((function(e){var a=e.final,t=null,s=null,i=null;a?(t=e.alternatives,s=e.speaker,i=e.keywords_result):(t=e.alternatives,s=e.speaker);var l=t,d=Object(N.a)(l,1)[0].transcript;void 0===s&&(s=null),n.push({final:a,speaker:s,text:d}),o=a,i&&r.push(i)})),{transcript:n,keywordInfo:r,resultIndex:t,final:o}}(e),t=a.transcript,r=a.keywordInfo,o=a.resultIndex;n({keywordInfo:r,resultIndex:o,transcript:t,type:ke})}},i=function(){t.audioStream&&t.audioStream.stop(),n({isTranscribing:!1,type:ve}),n({isUploadPlaying:!1,type:ye}),n({isSamplePlaying:!1,type:we}),n({isRecording:!1,type:_e})},l=function(){var e=Object(O.a)(x.a.mark((function e(a){var r,s,i,l,d,c,u,p;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,o&&o.current&&o.current.clientWidth&&(r=o.current.clientWidth),s=r||300,i=a instanceof File,e.prev=4,l=null,!i){e.next=10;break}l=a,e.next=16;break;case 10:return e.next=12,fetch(a);case 12:return d=e.sent,e.next=15,d.blob();case 15:l=e.sent;case 16:return e.next=18,Ne(l,t.audioContext,s);case 18:c=e.sent,u=c.reducedFloatArray,p=c.duration,n({audioDataArray:u,audioDurationInMs:1e3*p,type:fe}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(4),n({error:Ce("File upload error","There was a problem trying to read the file."),type:he});case 27:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(a){return e.apply(this,arguments)}}(),d=function(){var e=Object(O.a)(x.a.mark((function e(a){var r,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:!1,audio:!0});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n({error:Ce("No microphone detected","Cannot transcribe from microphone."),type:he});case 10:return o=B()(Object(S.a)(Object(S.a)({},a),{},{mediaStream:r,keepMic:!0})),r&&((s=t.audioAnalyzer).fttSize=2048,n({audioAnalyzer:s,type:ue}),t.audioContext.createMediaStreamSource(r).connect(t.audioAnalyzer)),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}(),c=function(e){e.on("data",(function(e){s(e)})).on("end",(function(){i()})).on("error",(function(){n({error:Ce("Audio transcription error","There was an error trying to read the audio data. Please try again."),type:he}),i()})),n({isTranscribing:!0,type:ve})},u=function(){t.audioStream&&(t.audioStream.stop(),t.audioStream.removeAllListeners(),t.audioStream.recognizeStream.removeAllListeners()),t.audioContext&&"suspended"===t.audioContext.state&&t.audioContext.resume()},p=function(){var e=Object(O.a)(x.a.mark((function e(a){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),t=P()(a),e.next=4,l(a.file);case 4:n({isUploadPlaying:!0,type:ye}),n({isSamplePlaying:!1,type:we}),n({isRecording:!1,type:_e}),n({audioSource:"upload",type:me}),n({audioStream:t,type:be}),c(t);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),m=function(){var e=Object(O.a)(x.a.mark((function e(a){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),t=P()(a),e.next=4,l(a.file);case 4:n({isSamplePlaying:!0,type:we}),n({isUploadPlaying:!1,type:ye}),n({isRecording:!1,type:_e}),n({audioSource:"sample",type:me}),n({audioStream:t,type:be}),c(t);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),b=function(){var e=Object(O.a)(x.a.mark((function e(a){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.next=3,d(a);case 3:t=e.sent,n({isRecording:!0,type:_e}),n({isSamplePlaying:!1,type:we}),n({isUploadPlaying:!1,type:ye}),n({audioSource:"microphone",type:me}),n({audioStream:t,type:be}),c(t);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"service-container",children:[Object(v.jsx)(ce,{kind:"info",subtitle:"This system is for demonstration purposes only and is not intended to process Personal Data. No Personal Data is to be entered into this system as it may not have the necessary controls in place to meet the requirements of the General Data Protection Regulation (EU) 2016/679."}),t.error&&Object(v.jsx)(ce,{kind:"error",title:t.error.title,subtitle:t.error.description,hideAfterFirstDisplay:!1,timeout:5e3,onCloseButtonClick:function(){return n({error:null,type:he})}}),Object(v.jsx)(G,{isRecording:t.isRecording,isSamplePlaying:t.isSamplePlaying,isUploadPlaying:t.isUploadPlaying,onError:function(e){n({error:e,type:he})},onSelectNewModel:function(){n({audioDataArray:[],audioDurationInMs:0,type:fe}),n({keywordInfo:[],resultIndex:0,transcript:[],type:ke})},onStartPlayingFileUpload:p,onStopPlayingFileUpload:function(){i(),n({isUploadPlaying:!1,type:ye})},onStartPlayingSample:m,onStopPlayingSample:function(){i(),n({isSamplePlaying:!1,type:we})},onStartRecording:b,onStopRecording:function(){i(),n({isRecording:!1,type:_e})}}),Object(v.jsx)(se,{audioAnalyzer:t.audioAnalyzer,audioDataArray:t.audioDataArray,audioDuration:t.audioDurationInMs,audioSource:t.audioSource,audioWaveContainerRef:o,isTranscribing:t.isTranscribing,keywordInfo:t.keywordInfo,transcriptArray:t.transcript})]})},Re=function(e){Object(r.useEffect)((function(){var a=document.createElement("script");return a.src=e,a.async=!0,document.body.appendChild(a),function(){document.body.removeChild(a)}}),[e])},Be=[Object(v.jsxs)(i.a,{className:"link",target:"_blank",rel:"noopener noreferrer",href:"https://cloud.ibm.com/apidocs/speech-to-text",children:[Object(v.jsx)("p",{className:"link-text",children:"API reference"}),Object(v.jsx)(c.a,{className:"link-icon"})]},"api-link"),Object(v.jsxs)(i.a,{className:"link",target:"_blank",rel:"noopener noreferrer",href:"https://cloud.ibm.com/docs/services/speech-to-text?topic=speech-to-text-gettingStarted",children:[Object(v.jsx)("p",{className:"link-text",children:"Documentation"}),Object(v.jsx)(p.a,{className:"link-icon"})]},"docs-link"),Object(v.jsxs)(i.a,{className:"link",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/IBM/speech-to-text-code-pattern",children:[Object(v.jsx)("p",{className:"link-text",children:"GitHub"}),Object(v.jsx)(_.a,{className:"link-icon"})]},"github-link"),Object(v.jsxs)(i.a,{className:"link getting-started",target:"_blank",rel:"noopener noreferrer",href:"https://cloud.ibm.com/registration?target=%2Fcatalog%2Fservices%2Fspeech-to-text%3FhideTours%3Dtrue%26cm_mmc%3D-_-Watson%2BCore_Watson%2BCore%2B-%2BPlatform-_-WW_WW-_-wdc-ref%26cm_mmc%3D-_-Watson%2BCore_Watson%2BCore%2B-%2BPlatform-_-WW_WW-_-wdc-ref%26cm_mmca1%3D000000OF%26cm_mmca2%3D10000409&_ga=2.158846578.918027017.1572271296-1405764752.1539884377&_gac=1.250083700.1571850605.Cj0KCQjw3JXtBRC8ARIsAEBHg4m4g1PSkKQRoI6YUe4A-6ysul0ziiWU0DVbqlbWAQpq3721u-bxkd0aAkV3EALw_wcB&cm_mc_uid=83381689395615475202389&cm_mc_sid_50200000=82214471572470185115&cm_mc_sid_52640000=21949701572470185117&cm_mmc=Earned-_-Watson%20Core%20-%20Platform-_-WW_WW-_-intercom&cm_mmca1=000000OF&cm_mmca2=10000409",children:[Object(v.jsx)(l.a,{className:"link-button",kind:"tertiary",renderIcon:h.a,children:"Start for free on IBM Cloud"}),Object(v.jsx)(b.a,{className:"link-icon"})]},"ibm-cloud-link")],Ae=function(){return Re("https://cdn.jsdelivr.net/gh/watson-developer-cloud/watson-developer-cloud.github.io@master/analytics.js"),Object(v.jsxs)("div",{className:"app-container",children:[Object(v.jsx)(k,{description:"IBM Watson Speech to Text is a cloud-native API that transforms voice into written text.",links:Be,title:"Watson Speech to Text"}),Object(v.jsx)(Pe,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(v.jsx)(Ae,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},36:function(e){e.exports=JSON.parse('[{"name":"en-US_BroadbandModel","language":"en-US","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-US_BroadbandModel","rate":16000,"filename":"en-US_Broadband-sample.wav","keywords":"IBM, admired, AI, transformations, cognitive","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"US English (16khz Broadband)"},{"name":"en-US_NarrowbandModel","language":"en-US","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-US_NarrowbandModel","rate":8000,"filename":"en-US_Narrowband-sample.wav","keywords":"course online, four hours, help","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"US English (8khz Narrowband)"},{"name":"en-US_ShortForm_NarrowbandModel","language":"en-US","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-US_ShortForm_NarrowbandModel","rate":8000,"filename":"en-US_ShortForm_Narrowband-sample.wav","keywords":"twenty thousand dollars, filled out, car","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"US English Short Form (8khz Narrowband)"},{"name":"fr-FR_BroadbandModel","language":"fr-FR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/fr-FR_BroadbandModel","rate":16000,"filename":"fr-FR_Broadband-sample.wav","keywords":"dur\xe9e du travail, loisirs","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"French (16khz Broadband)"},{"name":"fr-FR_NarrowbandModel","language":"fr-FR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/fr-FR_NarrowbandModel","rate":8000,"filename":"fr-FR_Narrowband-sample.wav","keywords":"dur\xe9e du travail, loisirs","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"French (8khz Narrowband)"},{"name":"pt-BR_BroadbandModel","language":"pt-BR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/pt-BR_BroadbandModel","rate":16000,"filename":"pt-BR_Broadband-sample.wav","keywords":"sistema da ibm, setor banc\xe1rio, qualidade, necessidades dos clientes","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"Brazilian Portuguese (16khz Broadband)"},{"name":"pt-BR_NarrowbandModel","language":"pt-BR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/pt-BR_NarrowbandModel","rate":8000,"filename":"pt-BR_Narrowband-sample.wav","keywords":"cozinha, inovadoras receitas, criatividade","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"Brazilian Portuguese (8khz Narrowband)"},{"name":"ja-JP_BroadbandModel","language":"ja-JP","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ja-JP_BroadbandModel","rate":16000,"filename":"ja-JP_Broadband-sample.wav","keywords":"\u97f3\u58f0\u8a8d\u8b58, \u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0, \u6280\u8853","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Japanese (16khz Broadband)"},{"name":"ja-JP_NarrowbandModel","language":"ja-JP","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ja-JP_NarrowbandModel","rate":8000,"filename":"ja-JP_Narrowband-sample.wav","keywords":"\u3054\u4f4f\u6240, \u3054\u672c\u4eba, \u751f\u5e74\u6708\u65e5","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Japanese (8khz Narrowband)"},{"name":"zh-CN_BroadbandModel","language":"zh-CN","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/zh-CN_BroadbandModel","rate":16000,"filename":"zh-CN_Broadband-sample.wav","keywords":"\u6c83 \u68ee \u662f \u8ba4\u77e5 , \u5927 \u6570\u636e \u5206\u6790 \u80fd\u529b","supported_features":{"custom_language_model":false,"speaker_labels":false},"description":"Mandarin (16khz Broadband)"},{"name":"zh-CN_NarrowbandModel","language":"zh-CN","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/zh-CN_NarrowbandModel","rate":8000,"filename":"zh-CN_Narrowband-sample.wav","keywords":"\u516c\u53f8 \u7684 \u652f\u6301 , \u7406\u8d22 \u8ba1\u5212","supported_features":{"custom_language_model":false,"speaker_labels":false},"description":"Mandarin (8khz Narrowband)"},{"name":"ko-KR_BroadbandModel","language":"ko-KR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ko-KR_BroadbandModel","rate":16000,"filename":"ko-KR_Broadband-sample.wav","keywords":"\ub124 \uba85, \uc219\ubc15, \ud638\ud154, \uc2f1\uae00\ub8f8, \ub450\uac1c, \uc608\uc57d","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"Korean (16khz Broadband)"},{"name":"ko-KR_NarrowbandModel","language":"ko-KR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ko-KR_NarrowbandModel","rate":8000,"filename":"ko-KR_Narrowband-sample.wav","keywords":"\uc0dd\uba85\ubcf4\ud5d8\uc0ac, \uc0c1\ub2f4\uc6d0, \ubcf8\uc778 \ud655\uc778, \uc131\ud568, \uc0dd\ub144\uc6d4\uc77c, \ud734\ub300\ud3f0 \ubc88\ud638","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"Korean (8khz Narrowband)"},{"name":"es-ES_BroadbandModel","language":"es-ES","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-ES_BroadbandModel","rate":16000,"filename":"es-ES_Broadband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Spanish (16khz Broadband)"},{"name":"es-ES_NarrowbandModel","language":"es-ES","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-ES_NarrowbandModel","rate":8000,"filename":"es-ES_Narrowband-sample.wav","keywords":"M\xe9xico, Grecia, diciembre","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Spanish (8khz Narrowband)"},{"name":"ar-AR_BroadbandModel","language":"ar-AR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/ar-AR_BroadbandModel","rate":16000,"filename":"ar-AR_Broadband-sample.wav","keywords":"\u0627\u0644\u0637\u0642\u0633 , \u0631\u064a\u0627\u062d \u0645\u0639\u062a\u062f\u0644\u0629","supported_features":{"custom_language_model":false,"speaker_labels":false},"description":"Modern Standard Arabic (16khz Broadband)"},{"name":"en-GB_BroadbandModel","language":"en-GB","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-GB_BroadbandModel","rate":16000,"filename":"en-GB_Broadband-sample.wav","keywords":"important industry, affordable travel, business","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"GB English (16khz Broadband)"},{"name":"en-GB_NarrowbandModel","language":"en-GB","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/en-GB_NarrowbandModel","rate":8000,"filename":"en-GB_Narrowband-sample.wav","keywords":"heavy rain, northwest, UK","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"GB English (8khz Narrowband)"},{"name":"de-DE_BroadbandModel","language":"de-DE","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/de-DE_BroadbandModel","rate":16000,"filename":"de-DE_Broadband-sample.wav","keywords":"diskussion, k\xfcnstlicher intelligenz, m\xf6glichkeiten, grundprinzipien","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"German (16khz Broadband)"},{"name":"de-DE_NarrowbandModel","language":"de-DE","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/de-DE_NarrowbandModel","rate":8000,"filename":"de-DE_Narrowband-sample.wav","keywords":"Augen, linden b\xe4umen, T\xfcrme von Wien","supported_features":{"custom_language_model":true,"speaker_labels":false},"description":"German (8khz Narrowband)"},{"name":"es-AR_BroadbandModel","language":"es-AR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-AR_BroadbandModel","rate":16000,"filename":"es-ES_Broadband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Argentinian Spanish (16khz Broadband)"},{"name":"es-AR_NarrowbandModel","language":"es-AR","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-AR_NarrowbandModel","rate":8000,"filename":"es-ES_Narrowband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Argentinian Spanish (8khz Narrowband)"},{"name":"es-CL_BroadbandModel","language":"es-CL","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-CL_BroadbandModel","rate":16000,"filename":"es-ES_Broadband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Chilean Spanish (16khz Broadband)"},{"name":"es-CL_NarrowbandModel","language":"es-CL","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-CL_NarrowbandModel","rate":8000,"filename":"es-ES_Narrowband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Chilean Spanish (8khz Narrowband)"},{"name":"es-CO_BroadbandModel","language":"es-CO","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-CO_BroadbandModel","rate":16000,"filename":"es-ES_Broadband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Colombian Spanish (16khz Broadband)"},{"name":"es-CO_NarrowbandModel","language":"es-CO","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-CO_NarrowbandModel","rate":8000,"filename":"es-ES_Narrowband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Colombian Spanish (8khz Narrowband)"},{"name":"es-MX_BroadbandModel","language":"es-MX","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-MX_BroadbandModel","rate":16000,"filename":"es-ES_Broadband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Mexican Spanish (16khz Broadband)"},{"name":"es-MX_NarrowbandModel","language":"es-MX","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-MX_NarrowbandModel","rate":8000,"filename":"es-ES_Narrowband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Mexican Spanish (8khz Narrowband)"},{"name":"es-PE_BroadbandModel","language":"es-PE","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-PE_BroadbandModel","rate":16000,"filename":"es-ES_Broadband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Peruvian Spanish (16khz Broadband)"},{"name":"es-PE_NarrowbandModel","language":"es-PE","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/es-PE_NarrowbandModel","rate":8000,"filename":"es-ES_Narrowband-sample.wav","keywords":"Roberto, Pedro","supported_features":{"custom_language_model":true,"speaker_labels":true},"description":"Peruvian Spanish (8khz Narrowband)"},{"name":"nl-NL_BroadbandModel","language":"nl-NL","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/nl-NL_BroadbandModel","rate":16000,"filename":"nl-NL_Broadband-sample.wav","keywords":"bestelling, voertuig, auto, aanvraag","supported_features":{"custom_language_model":false,"speaker_labels":false},"description":"Dutch (16khz Broadband)"},{"name":"nl-NL_NarrowbandModel","language":"nl-NL","url":"https://stream.watsonplatform.net/speech-to-text/api/v1/models/nl-NL_NarrowbandModel","rate":8000,"filename":"nl-NL_Narrowband-sample.wav","keywords":"bestelling, voertuig, auto, aanvraag","supported_features":{"custom_language_model":false,"speaker_labels":true},"description":"Dutch (8khz Narrowband)"}]')}},[[184,1,2]]]);
//# sourceMappingURL=main.0beebf80.chunk.js.map